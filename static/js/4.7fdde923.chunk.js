(window["webpackJsonphacker-news"]=window["webpackJsonphacker-news"]||[]).push([[4],{31:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var s=a(28),n=a(29),r=a(32),c=a(30),i=a(33),o=a(0),l=a.n(o),h=a(9),u=a(34),m=a(39),p=function(e){return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"logo"},"H"),l.a.createElement("div",{className:"search-label-container"},l.a.createElement("label",{className:"search-label"}," Search"),l.a.createElement("label",{className:"search-label"}," Hacker News")),l.a.createElement("div",{className:"header-content"},l.a.createElement("input",{className:"search-text-input",type:"text",placeholder:"Search stories by title, url or author",onChange:function(t){e.onSearchText(t.target.value)}}),l.a.createElement("button",{className:"search-button"},l.a.createElement(u.a,{icon:m.a,color:"#ff742b",size:"1x"}))))},d=a(6),f={newsItems:{getStoriesList:"".concat("https://hn.algolia.com/api","/v1/items/")},search:{searchResults:"".concat("https://hn.algolia.com/api","/v1/")}},g=function(e){return{type:d.c,msg:e}},b=function(e){return{payload:e,type:d.b}},v=function(e){return{payload:e,type:d.a}},E=(a(31),function(e){var t=e.story,a=e.story.title,s="".concat(new Date((new Date).getFullYear()-e.story.created_at).getFullYear()," years back"),n=document.getElementById("storyTitle");if(e.searchText&&e.searchText.length>0&&a&&a.includes(e.searchText)){if(n){for(var r=new RegExp(e.searchText,"gi"),c=a.match(r),i="",o=c.length,h=0;h<o;h++)i=a.replace(c[h],'<em class="em">'.concat(c[h],"</em>"));var u=document.createElement("p");u.innerHTML=i,n.parentNode&&n.parentNode.replaceChild(u,n)}}else n&&(n.innerHTML=a);return l.a.createElement("article",{className:"story"},l.a.createElement("div",{className:"story-container"},l.a.createElement("div",{className:"story-data"},l.a.createElement("div",{className:"story-title"},l.a.createElement("a",{href:"https://news.ycombinator.com/item?id=16582136",target:"_blank"},l.a.createElement("span",{id:"storyTitle"},t.title?t.title:" No Title Found")),l.a.createElement("a",{href:"http://www.bbc.com/news/uk-43396008",target:"_blank",className:"story-link"},"(http://www.bbc.com/news/uk-43396008)")),l.a.createElement("div",{className:"story-meta"},l.a.createElement("span",null,l.a.createElement("a",{href:"https://news.ycombinator.com/item?id=16582136",target:"_blank"},t.points," points")),",",l.a.createElement("span",{className:"story-separator"},"|"),l.a.createElement("span",null,l.a.createElement("a",{href:"https://news.ycombinator.com/user?id=Cogito",target:"_blank"},l.a.createElement("span",null,t.author))),l.a.createElement("span",{className:"story-separator"},"|"),l.a.createElement("span",null,l.a.createElement("a",{href:"https://news.ycombinator.com/item?id=16582136",target:"_blank"},s)),l.a.createElement("span",{className:"story-separator"},"|"),l.a.createElement("span",null,l.a.createElement("a",{href:"https://news.ycombinator.com/item?id=16582136",target:"_blank"},t.children?t.children.length:t.num_comments," comments"))))))}),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={users:[],page:1,pageSize:10,loading:!1,prevY:0},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.storiesList&&0!==this.props.storiesList.length||this.getStories(this.state.page);this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var a=e[0].boundingClientRect.y;if(this.state.prevY>a){var s=this.props.storiesList[this.props.storiesList.length-1].id;this.getStories(s),this.setState({page:s})}this.setState({prevY:a})}},{key:"getStories",value:function(e){this.setState({loading:!0});for(var t=e+this.state.pageSize,a=e;a<t;a++)this.props.getStoriesList(a);this.setState({page:t})}},{key:"render",value:function(){var e=this,t={display:this.state.loading?"block":"none"},a=this.props.isSearch?this.props.searchResults:this.props.storiesList;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"module_container"},a&&a.length>0&&a.map((function(t,a){return l.a.createElement(E,{key:t.author+a,story:t,searchText:e.props.searchText})}))),l.a.createElement("div",{ref:function(t){return e.loadingRef=t},style:{height:"100px",margin:"30px"}},l.a.createElement("span",{style:t},"Loading...")))}}]),t}(o.Component),S=Object(h.b)((function(e){return{storiesList:e.storiesListReducer&&e.storiesListReducer.storiesList}}),{getStoriesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){fetch("".concat(f.newsItems.getStoriesList).concat(e)).then((function(e){200===e.status&&e.json().then((function(e){t(b(e))}))})).catch((function(e){t(g(e))}))}}})(y),w=function(e){return l.a.createElement("div",{className:"content"},l.a.createElement(S,{isSearch:e.isSearch,searchText:e.searchText,searchResults:e.searchResults}))},N=function(e){return l.a.createElement("div",{className:"footer"},l.a.createElement("label",null,"@copyright"))},R=(a(40),a(41),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).onSearchText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"story";e.length>0?(a.props.getSearchResults(e,t),a.setState({searchText:e})):a.setState({isSearch:!1,searchText:null,searchResults:null})},a.state={isSearch:!1,searchResults:void 0},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.searchResults!==e.searchResults&&this.state.searchText&&this.setState({isSearch:!0,searchResults:e.searchResults.hits})}},{key:"render",value:function(){return l.a.createElement("div",{className:"shell"},l.a.createElement(p,{cartItems:this.props.cartItems,onSearchText:this.onSearchText}),l.a.createElement("div",{className:"main_content"},l.a.createElement(w,{searchResults:this.state.searchResults,isSearch:this.state.isSearch,searchText:this.state.searchText})),l.a.createElement(N,null))}}]),t}(o.Component));t.default=Object(h.b)((function(e){return{searchResults:e.storiesListReducer&&e.storiesListReducer.searchResults}}),{getSearchResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"story";return function(a){fetch("".concat(f.search.searchResults,"?query=").concat(e,"&tags=").concat(t)).then((function(e){200===e.status&&e.json().then((function(e){a(v(e))}))})).catch((function(e){a(g(e))}))}}})(R)}}]);
//# sourceMappingURL=4.7fdde923.chunk.js.map